version: 3
automerge: true
projects:
  - name: base
    dir: terraform/stacks/smartprotection/base
    workspace: dev
    terraform_version: v0.14.4
    autoplan:
      when_modified: ["*.tf", "../../../modules/**.tf", "*.md"]
      enabled: true
    apply_requirements: [mergeable, approved]
    workflow: base
workflows:
  base:
    plan:
      steps:
        - init
        - plan
    apply:
      steps:
        - apply
